<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1f2937; }
      .subtitle { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #374151; }
      .table-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #ffffff; }
      .field { font-family: Arial, sans-serif; font-size: 12px; fill: #1f2937; }
      .field-type { font-family: Arial, sans-serif; font-size: 10px; fill: #6b7280; }
      .relationship { font-family: Arial, sans-serif; font-size: 12px; fill: #059669; }
      .legend { font-family: Arial, sans-serif; font-size: 12px; fill: #374151; }
    </style>
  </defs>
  
  <!-- Hintergrund -->
  <rect width="1200" height="800" fill="#f9fafb"/>
  
  <!-- Titel -->
  <text x="600" y="30" text-anchor="middle" class="title">Lopez IT Welt - Compliance System</text>
  <text x="600" y="55" text-anchor="middle" class="subtitle">KI-Agenten-Compliance &amp; Datenbankstruktur</text>
  
  <!-- Tabelle: laws -->
  <rect x="50" y="100" width="250" height="200" fill="#3b82f6" rx="8"/>
  <text x="175" y="125" text-anchor="middle" class="table-title">LAWS</text>
  <text x="60" y="145" class="field">• id (INT, PK)</text>
  <text x="60" y="160" class="field">• title (VARCHAR)</text>
  <text x="60" y="175" class="field">• description (TEXT)</text>
  <text x="60" y="190" class="field">• category (VARCHAR)</text>
  <text x="60" y="205" class="field">• source_file (VARCHAR)</text>
  <text x="60" y="220" class="field">• created_at (TIMESTAMP)</text>
  <text x="60" y="235" class="field">• updated_at (TIMESTAMP)</text>
  <text x="60" y="250" class="field-type">DSGVO, BDSG, TMG</text>
  
  <!-- Tabelle: policies -->
  <rect x="350" y="100" width="250" height="200" fill="#10b981" rx="8"/>
  <text x="475" y="125" text-anchor="middle" class="table-title">POLICIES</text>
  <text x="360" y="145" class="field">• id (INT, PK)</text>
  <text x="360" y="160" class="field">• policy_name (VARCHAR)</text>
  <text x="360" y="175" class="field">• description (TEXT)</text>
  <text x="360" y="190" class="field">• module (VARCHAR)</text>
  <text x="360" y="205" class="field">• enforced (BOOLEAN)</text>
  <text x="360" y="220" class="field">• created_at (TIMESTAMP)</text>
  <text x="360" y="235" class="field">• updated_at (TIMESTAMP)</text>
  <text x="360" y="250" class="field-type">Enterprise++, Development</text>
  
  <!-- Tabelle: compliance_rules -->
  <rect x="650" y="100" width="250" height="200" fill="#f59e0b" rx="8"/>
  <text x="775" y="125" text-anchor="middle" class="table-title">COMPLIANCE_RULES</text>
  <text x="660" y="145" class="field">• id (INT, PK)</text>
  <text x="660" y="160" class="field">• rule_name (VARCHAR)</text>
  <text x="660" y="175" class="field">• rule_description (TEXT)</text>
  <text x="660" y="190" class="field">• rule_category (VARCHAR)</text>
  <text x="660" y="205" class="field">• rule_type (ENUM)</text>
  <text x="660" y="220" class="field">• rule_source (VARCHAR)</text>
  <text x="660" y="235" class="field">• created_at (TIMESTAMP)</text>
  <text x="660" y="250" class="field-type">DSGVO, GDPR, CCPA</text>
  
  <!-- Tabelle: ki_agent_compliance -->
  <rect x="950" y="100" width="250" height="200" fill="#ef4444" rx="8"/>
  <text x="1075" y="125" text-anchor="middle" class="table-title">KI_AGENT_COMPLIANCE</text>
  <text x="960" y="145" class="field">• id (INT, PK)</text>
  <text x="960" y="160" class="field">• agent_name (VARCHAR)</text>
  <text x="960" y="175" class="field">• action_type (VARCHAR)</text>
  <text x="960" y="190" class="field">• action_description (TEXT)</text>
  <text x="960" y="205" class="field">• compliance_status (ENUM)</text>
  <text x="960" y="220" class="field">• applied_laws (JSON)</text>
  <text x="960" y="235" class="field">• applied_policies (JSON)</text>
  <text x="960" y="250" class="field-type">Log &amp; Audit</text>
  
  <!-- Beziehungen -->
  <!-- laws -> ki_agent_compliance -->
  <line x1="300" y1="200" x2="950" y2="200" stroke="#059669" stroke-width="2"/>
  <text x="625" y="195" text-anchor="middle" class="relationship">applied_laws</text>
  
  <!-- policies -> ki_agent_compliance -->
  <line x1="600" y1="200" x2="950" y2="200" stroke="#059669" stroke-width="2"/>
  <text x="775" y="195" text-anchor="middle" class="relationship">applied_policies</text>
  
  <!-- compliance_rules -> ki_agent_compliance -->
  <line x1="900" y1="200" x2="950" y2="200" stroke="#059669" stroke-width="2"/>
  <text x="925" y="195" text-anchor="middle" class="relationship">validation</text>
  
  <!-- Views -->
  <rect x="50" y="350" width="300" height="120" fill="#8b5cf6" rx="8"/>
  <text x="200" y="375" text-anchor="middle" class="table-title">VIEWS</text>
  <text x="60" y="395" class="field">• v_active_policies</text>
  <text x="60" y="410" class="field">• v_laws_by_category</text>
  <text x="60" y="425" class="field">• v_ki_agent_compliance_status</text>
  <text x="60" y="440" class="field-type">Reporting &amp; Analytics</text>
  
  <!-- Stored Procedures -->
  <rect x="400" y="350" width="300" height="120" fill="#06b6d4" rx="8"/>
  <text x="550" y="375" text-anchor="middle" class="table-title">STORED PROCEDURES</text>
  <text x="410" y="395" class="field">• CheckKIAgentCompliance()</text>
  <text x="410" y="410" class="field">• GetComplianceRulesByCategory()</text>
  <text x="410" y="425" class="field-type">Compliance Validation</text>
  
  <!-- Triggers -->
  <rect x="750" y="350" width="300" height="120" fill="#84cc16" rx="8"/>
  <text x="900" y="375" text-anchor="middle" class="table-title">TRIGGERS</text>
  <text x="760" y="395" class="field">• laws_audit_insert</text>
  <text x="760" y="410" class="field">• policies_audit_insert</text>
  <text x="760" y="425" class="field-type">Automatic Audit Logging</text>
  
  <!-- KI-Agenten-System -->
  <rect x="50" y="520" width="1100" height="200" fill="#f3f4f6" stroke="#d1d5db" stroke-width="2" rx="8"/>
  <text x="600" y="545" text-anchor="middle" class="subtitle">KI-Agenten-Compliance-System</text>
  
  <!-- Compliance-Flow -->
  <rect x="80" y="560" width="200" height="80" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="6"/>
  <text x="180" y="580" text-anchor="middle" class="field">KI-Agent</text>
  <text x="180" y="595" text-anchor="middle" class="field">Aktion ausführen</text>
  <text x="180" y="610" text-anchor="middle" class="field-type">Action Request</text>
  
  <rect x="320" y="560" width="200" height="80" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="6"/>
  <text x="420" y="580" text-anchor="middle" class="field">Compliance</text>
  <text x="420" y="595" text-anchor="middle" class="field">Middleware</text>
  <text x="420" y="610" text-anchor="middle" class="field-type">Validation</text>
  
  <rect x="560" y="560" width="200" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="6"/>
  <text x="660" y="580" text-anchor="middle" class="field">Database</text>
  <text x="660" y="595" text-anchor="middle" class="field">Query</text>
  <text x="660" y="610" text-anchor="middle" class="field-type">Rules Check</text>
  
  <rect x="800" y="560" width="200" height="80" fill="#fee2e2" stroke="#ef4444" stroke-width="2" rx="6"/>
  <text x="900" y="580" text-anchor="middle" class="field">Result</text>
  <text x="900" y="595" text-anchor="middle" class="field">Compliance Status</text>
  <text x="900" y="610" text-anchor="middle" class="field-type">Pass/Fail</text>
  
  <!-- Pfeile -->
  <line x1="280" y1="600" x2="320" y2="600" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="520" y1="600" x2="560" y2="600" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="760" y1="600" x2="800" y2="600" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrowhead Definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>
  
  <!-- Legende -->
  <rect x="50" y="750" width="1100" height="40" fill="#ffffff" stroke="#d1d5db" stroke-width="1" rx="4"/>
  <text x="70" y="770" class="legend">Legende:</text>
  <rect x="150" y="760" width="15" height="15" fill="#3b82f6"/>
  <text x="175" y="770" class="legend">Gesetze</text>
  <rect x="250" y="760" width="15" height="15" fill="#10b981"/>
  <text x="275" y="770" class="legend">Policies</text>
  <rect x="350" y="760" width="15" height="15" fill="#f59e0b"/>
  <text x="375" y="770" class="legend">Compliance Rules</text>
  <rect x="480" y="760" width="15" height="15" fill="#ef4444"/>
  <text x="505" y="770" class="legend">Audit Log</text>
  <rect x="580" y="760" width="15" height="15" fill="#8b5cf6"/>
  <text x="605" y="770" class="legend">Views</text>
  <rect x="680" y="760" width="15" height="15" fill="#06b6d4"/>
  <text x="705" y="770" class="legend">Procedures</text>
  <rect x="800" y="760" width="15" height="15" fill="#84cc16"/>
  <text x="825" y="770" class="legend">Triggers</text>
  
  <!-- Footer -->
  <text x="600" y="790" text-anchor="middle" class="legend">Lopez IT Welt - Enterprise++ Compliance System | Version 1.0 | 01.07.2025</text>
</svg> 