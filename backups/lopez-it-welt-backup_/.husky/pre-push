#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Pre-Push: Finale Compliance-PrÃ¼fungen..."

# VollstÃ¤ndige Enterprise++ Compliance-PrÃ¼fung
echo "ğŸ† VollstÃ¤ndige Enterprise++ Compliance-PrÃ¼fung..."
node scripts/full-enterprise-compliance-check.js
if [ $? -ne 0 ]; then
    echo "âŒ Enterprise++ Compliance verletzt - Push blockiert!"
    exit 1
fi

# Sicherheits-Scan
echo "ğŸ”’ Sicherheits-Scan..."
node scripts/security-scan.js
if [ $? -ne 0 ]; then
    echo "âŒ Sicherheitsprobleme gefunden - Push blockiert!"
    exit 1
fi

# Performance-Check
echo "âš¡ Performance-Check..."
node scripts/performance-check.js
if [ $? -ne 0 ]; then
    echo "âŒ Performance-Probleme gefunden - Push blockiert!"
    exit 1
fi

# QualitÃ¤ts-Metriken
echo "ğŸ“Š QualitÃ¤ts-Metriken prÃ¼fen..."
node scripts/quality-metrics-check.js
if [ $? -ne 0 ]; then
    echo "âŒ QualitÃ¤tsstandards nicht erfÃ¼llt - Push blockiert!"
    exit 1
fi

# Build-Test
echo "ğŸ”¨ Build-Test..."
npm run build
if [ $? -ne 0 ]; then
    echo "âŒ Build fehlgeschlagen - Push blockiert!"
    exit 1
fi

echo "âœ… Alle Pre-Push PrÃ¼fungen bestanden - Push erlaubt!" 