{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekte/lopez-it-welt/src/lib/db.ts"],"sourcesContent":["import mysql from \"mysql2/promise\";\n\n/**\n * Zentrale MySQL-Datenbankverbindung mit UTF-8 Konfiguration\n * Enterprise++ Standard f√ºr alle API-Routen\n *\n * @author Ramiro Lopez Rodriguez\n * @version 1.0.0\n * @date 2025-09-28\n */\n\n// MySQL-Verbindungskonfiguration - MySQL2-kompatibel\nconst dbConfig = {\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"lopez_it_welt\",\n  port: 3306,\n  charset: \"utf8mb4\",\n  supportBigNumbers: true,\n  bigNumberStrings: true,\n  // MySQL2-spezifische Pool-Optionen\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n  acquireTimeout: 60000,\n  timeout: 60000,\n};\n\n// Verbindungspool f√ºr bessere Performance\nlet pool: mysql.Pool | null = null;\n\n/**\n * Erstellt oder gibt bestehenden Verbindungspool zur√ºck\n */\nexport function getConnectionPool(): mysql.Pool {\n  if (!pool) {\n    pool = mysql.createPool({\n      host: \"localhost\",\n      user: \"root\",\n      password: \"\",\n      database: \"lopez_it_welt\",\n      port: 3306,\n      charset: \"utf8mb4\",\n      supportBigNumbers: true,\n      bigNumberStrings: true,\n      // Pool-spezifische Konfiguration (nur g√ºltige Optionen)\n      waitForConnections: true,\n      connectionLimit: 10,\n      queueLimit: 0,\n    });\n  }\n  return pool;\n}\n\n/**\n * Erstellt eine neue Datenbankverbindung mit UTF-8 Konfiguration\n */\nexport async function createConnection(): Promise<mysql.Connection> {\n  try {\n    const connection = await mysql.createConnection(dbConfig);\n\n    // UTF-8 explizit setzen f√ºr maximale Kompatibilit√§t\n    await connection.execute(\"SET NAMES utf8mb4\");\n    await connection.execute(\"SET CHARACTER SET utf8mb4\");\n    await connection.execute(\"SET character_set_connection=utf8mb4\");\n    await connection.execute(\"SET character_set_results=utf8mb4\");\n    await connection.execute(\"SET character_set_client=utf8mb4\");\n\n    return connection;\n  } catch (error) {\n    console.error(\"‚ùå MySQL-Verbindung fehlgeschlagen:\", error);\n    throw new Error(\n      `Datenbankverbindung fehlgeschlagen: ${error instanceof Error ? error.message : \"Unbekannter Fehler\"}`,\n    );\n  }\n}\n\n/**\n * F√ºhrt eine Query mit UTF-8 Konfiguration aus\n */\nexport async function executeQuery<T = any>(sql: string, params: any[] = []): Promise<T> {\n  const connection = await createConnection();\n  try {\n    const [rows] = await connection.execute(sql, params);\n    return rows as T;\n  } finally {\n    await connection.end();\n  }\n}\n\n/**\n * F√ºhrt eine Query mit Verbindungspool aus (f√ºr h√§ufige Abfragen)\n */\nexport async function executeQueryPool<T = any>(sql: string, params: any[] = []): Promise<T> {\n  const pool = getConnectionPool();\n  const [rows] = await pool.execute(sql, params);\n  return rows as T;\n}\n\n/**\n * Schlie√üt den Verbindungspool (beim Herunterfahren)\n */\nexport async function closePool(): Promise<void> {\n  if (pool) {\n    await pool.end();\n    pool = null;\n  }\n}\n\n/**\n * Testet die Datenbankverbindung\n */\nexport async function testConnection(): Promise<boolean> {\n  try {\n    const connection = await createConnection();\n    await connection.execute(\"SELECT 1\");\n    await connection.end();\n    return true;\n  } catch (error) {\n    console.error(\"‚ùå Datenbankverbindung fehlgeschlagen:\", error);\n    return false;\n  }\n}\n\n/**\n * Pr√ºft UTF-8 Konfiguration der Datenbank\n */\nexport async function checkUTF8Config(): Promise<{\n  database: string;\n  server: string;\n  connection: string;\n  results: string;\n}> {\n  const connection = await createConnection();\n  try {\n    const [rows] = await connection.execute(`\n      SELECT \n        @@character_set_database as database,\n        @@character_set_server as server,\n        @@character_set_connection as connection,\n        @@character_set_results as results\n    `);\n\n    const result = (rows as any[])[0];\n    await connection.end();\n\n    return {\n      database: result.database,\n      server: result.server,\n      connection: result.connection,\n      results: result.results,\n    };\n  } catch (error) {\n    await connection.end();\n    throw error;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEA;;;;;;;CAOC,GAED,qDAAqD;AACrD,MAAM,WAAW;IACf,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,MAAM;IACN,SAAS;IACT,mBAAmB;IACnB,kBAAkB;IAClB,mCAAmC;IACnC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;IACZ,gBAAgB;IAChB,SAAS;AACX;AAEA,0CAA0C;AAC1C,IAAI,OAA0B;AAKvB,SAAS;IACd,IAAI,CAAC,MAAM;QACT,OAAO,8IAAK,CAAC,UAAU,CAAC;YACtB,MAAM;YACN,MAAM;YACN,UAAU;YACV,UAAU;YACV,MAAM;YACN,SAAS;YACT,mBAAmB;YACnB,kBAAkB;YAClB,wDAAwD;YACxD,oBAAoB;YACpB,iBAAiB;YACjB,YAAY;QACd;IACF;IACA,OAAO;AACT;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,MAAM,8IAAK,CAAC,gBAAgB,CAAC;QAEhD,oDAAoD;QACpD,MAAM,WAAW,OAAO,CAAC;QACzB,MAAM,WAAW,OAAO,CAAC;QACzB,MAAM,WAAW,OAAO,CAAC;QACzB,MAAM,WAAW,OAAO,CAAC;QACzB,MAAM,WAAW,OAAO,CAAC;QAEzB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,MAAM,IAAI,MACR,CAAC,oCAAoC,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,sBAAsB;IAE1G;AACF;AAKO,eAAe,aAAsB,GAAW,EAAE,SAAgB,EAAE;IACzE,MAAM,aAAa,MAAM;IACzB,IAAI;QACF,MAAM,CAAC,KAAK,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK;QAC7C,OAAO;IACT,SAAU;QACR,MAAM,WAAW,GAAG;IACtB;AACF;AAKO,eAAe,iBAA0B,GAAW,EAAE,SAAgB,EAAE;IAC7E,MAAM,OAAO;IACb,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,OAAO,CAAC,KAAK;IACvC,OAAO;AACT;AAKO,eAAe;IACpB,IAAI,MAAM;QACR,MAAM,KAAK,GAAG;QACd,OAAO;IACT;AACF;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,MAAM;QACzB,MAAM,WAAW,OAAO,CAAC;QACzB,MAAM,WAAW,GAAG;QACpB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO;IACT;AACF;AAKO,eAAe;IAMpB,MAAM,aAAa,MAAM;IACzB,IAAI;QACF,MAAM,CAAC,KAAK,GAAG,MAAM,WAAW,OAAO,CAAC,CAAC;;;;;;IAMzC,CAAC;QAED,MAAM,SAAS,AAAC,IAAc,CAAC,EAAE;QACjC,MAAM,WAAW,GAAG;QAEpB,OAAO;YACL,UAAU,OAAO,QAAQ;YACzB,QAAQ,OAAO,MAAM;YACrB,YAAY,OAAO,UAAU;YAC7B,SAAS,OAAO,OAAO;QACzB;IACF,EAAE,OAAO,OAAO;QACd,MAAM,WAAW,GAAG;QACpB,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekte/lopez-it-welt/src/app/api/content/hero/route.ts"],"sourcesContent":["import { createConnection, executeQuery } from \"@/lib/db\";\nimport { NextRequest, NextResponse } from \"next/server\";\n\n// GET - Hero-Section Daten abrufen\nexport async function GET() {\n  try {\n    const rows = await executeQuery(\n      \"SELECT * FROM content_hero WHERE is_active = TRUE ORDER BY created_at DESC LIMIT 1\",\n    );\n\n    if (Array.isArray(rows) && rows.length === 0) {\n      return NextResponse.json({ error: \"Keine Hero-Daten gefunden\" }, { status: 404 });\n    }\n\n    return NextResponse.json(rows[0], {\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\",\n      },\n    });\n  } catch (error) {\n    console.error(\"‚ùå Hero API Fehler:\", error);\n\n    // üö® FALLBACK-DATEN F√úR HERO-SECTION\n    const fallbackHeroData = {\n      id: 1,\n      title: \"Professionelle IT-L√∂sungen\",\n      subtitle: \"Lopez IT Welt\",\n      description:\n        \"Wir entwickeln ma√ügeschneiderte Software-L√∂sungen mit Fokus auf Barrierefreiheit und pers√∂nliche Betreuung. Von der Konzeption bis zur Umsetzung - Ihr Partner f√ºr digitale Innovation.\",\n      button_text: \"Jetzt beraten lassen\",\n      button_link: \"/kontakt\",\n      background_style: \"gradient\",\n      background_value: \"from-blue-900 to-blue-600\",\n      is_active: true,\n      dataSource: \"fallback\",\n      status: \"fallback\",\n      fallbackReason: \"Datenbank-Verbindung fehlgeschlagen\",\n      timestamp: new Date().toISOString(),\n      warning: \"‚ö†Ô∏è NOTFALL-MODUS: Hero-Daten aus Fallback-System geladen\",\n    };\n\n    console.warn(\"üö® Hero API: Notfall-Modus aktiviert - Mock-Daten geladen\");\n    return NextResponse.json(fallbackHeroData, {\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\",\n      },\n    });\n  }\n}\n\n// PUT - Hero-Section Daten aktualisieren\nexport async function PUT(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const connection = await createConnection();\n\n    const {\n      title,\n      subtitle,\n      description,\n      button_text,\n      button_link,\n      background_style,\n      background_value,\n      is_active,\n    } = body;\n\n    await connection.execute(\n      `UPDATE content_hero SET \n       title = ?, \n       subtitle = ?, \n       description = ?, \n       button_text = ?, \n       button_link = ?, \n       background_style = ?, \n       background_value = ?, \n       is_active = ?,\n       updated_at = CURRENT_TIMESTAMP\n       WHERE id = ?`,\n      [\n        title,\n        subtitle,\n        description,\n        button_text,\n        button_link,\n        background_style,\n        background_value,\n        is_active,\n        body.id,\n      ],\n    );\n\n    await connection.end();\n\n    return NextResponse.json({\n      success: true,\n      message: \"Hero-Daten aktualisiert\",\n    });\n  } catch {\n    // Hero Update Error\n    return NextResponse.json({ error: \"Update fehlgeschlagen\" }, { status: 500 });\n  }\n}\n\n// POST - Neue Hero-Section Daten erstellen\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const connection = await createConnection();\n\n    const {\n      title,\n      subtitle,\n      description,\n      button_text,\n      button_link,\n      background_style = \"gradient\",\n      background_value,\n      is_active = true,\n    } = body;\n\n    const [result] = await connection.execute(\n      `INSERT INTO content_hero (title, subtitle, description, button_text, button_link, background_style, background_value, is_active) \n       VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,\n      [\n        title,\n        subtitle,\n        description,\n        button_text,\n        button_link,\n        background_style,\n        background_value,\n        is_active,\n      ],\n    );\n\n    await connection.end();\n\n    return NextResponse.json({\n      success: true,\n      message: \"Hero-Daten erstellt\",\n      id: (result as { insertId: number }).insertId,\n    });\n  } catch {\n    // Hero Create Error\n    return NextResponse.json({ error: \"Erstellung fehlgeschlagen\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,kIAAY,EAC7B;QAGF,IAAI,MAAM,OAAO,CAAC,SAAS,KAAK,MAAM,KAAK,GAAG;YAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;YAChC,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,qCAAqC;QACrC,MAAM,mBAAmB;YACvB,IAAI;YACJ,OAAO;YACP,UAAU;YACV,aACE;YACF,aAAa;YACb,aAAa;YACb,kBAAkB;YAClB,kBAAkB;YAClB,WAAW;YACX,YAAY;YACZ,QAAQ;YACR,gBAAgB;YAChB,WAAW,IAAI,OAAO,WAAW;YACjC,SAAS;QACX;QAEA,QAAQ,IAAI,CAAC;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC,kBAAkB;YACzC,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF;AACF;AAGO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,aAAa,MAAM,IAAA,sIAAgB;QAEzC,MAAM,EACJ,KAAK,EACL,QAAQ,EACR,WAAW,EACX,WAAW,EACX,WAAW,EACX,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACV,GAAG;QAEJ,MAAM,WAAW,OAAO,CACtB,CAAC;;;;;;;;;;mBAUY,CAAC,EACd;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,KAAK,EAAE;SACR;QAGH,MAAM,WAAW,GAAG;QAEpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAM;QACN,oBAAoB;QACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,aAAa,MAAM,IAAA,sIAAgB;QAEzC,MAAM,EACJ,KAAK,EACL,QAAQ,EACR,WAAW,EACX,WAAW,EACX,WAAW,EACX,mBAAmB,UAAU,EAC7B,gBAAgB,EAChB,YAAY,IAAI,EACjB,GAAG;QAEJ,MAAM,CAAC,OAAO,GAAG,MAAM,WAAW,OAAO,CACvC,CAAC;sCAC+B,CAAC,EACjC;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAGH,MAAM,WAAW,GAAG;QAEpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,IAAI,AAAC,OAAgC,QAAQ;QAC/C;IACF,EAAE,OAAM;QACN,oBAAoB;QACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF","debugId":null}}]
}